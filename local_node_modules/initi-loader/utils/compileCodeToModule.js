import path from "path";
import Module from "module";

export default function compileCodeToModule(code, { filename, exportName = "" }) {
    const module = new Module(filename);
    module.filename = filename;
    module.paths = Module._nodeModulePaths(path.dirname(filename));
    const finalCode = `${code}\n\nmodule.exports = ${exportName};`;
    module._compile(finalCode, filename);
    return module.exports;
}
